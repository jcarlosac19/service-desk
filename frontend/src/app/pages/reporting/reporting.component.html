<main class="reporting-container">
  <header class="header-container-filters mt-1">
    <div class="d-flex gap-3 flex-column">
      <label class="label-dates" for="time">Fecha Inicio</label>
      <p-calendar
        [(ngModel)]="dateStart"
        [showTime]="true"
        [showSeconds]="true"
        inputId="time"
      ></p-calendar>
    </div>

    <div class="d-flex gap-3 flex-column">
      <label class="label-dates" for="time">Fecha Fin</label>
      <p-calendar
        [(ngModel)]="dateEnd"
        [showTime]="true"
        [showSeconds]="true"
        inputId="time"
      ></p-calendar>
    </div>
    <div class="d-flex justify-content-center align-items-end">
      <button
        pButton
        pRipple
        type="button"
        label="Generar Reporte"
        class="p-button-raised p-button-info"
        (click)="onGenerateReport($event)"
      ></button>
    </div>
  </header>
  <section class="mt-2 overflow-auto">
    <p-panel header="Por Tickets" styleClass="mb-3" [toggleable]="true">
      <div>
        <p-table [value]="data" [paginator]="true" [rows]="5">
          <ng-template pTemplate="header">
              <tr>
                  <th>Ticket Id</th>
                  <th>Creador</th>
                  <th>Asignado</th>
                  <th>Fecha Creacion</th>
                  <th>Fecha Completado</th>
                  <th>Tiempo Estimado Resolucion</th>
                  <th>Tiempo Real Resolucion</th>
                  <th>SLA</th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-data>
              <tr>
                  <td>{{data.ticketId}}</td>
                  <td style="width: 150px;">{{data.email_creador}}</td>
                  <td>{{data.asignado}}</td>
                  <td>{{data.creado_a}}</td>
                  <td>{{data.compleado_a}}</td>
                  <td style="width: 170px;" >{{data.tiempoEstimadoResolucion}}</td>
                  <td style="width: 150px">{{data.tiempoRealResolucion}}</td>
                  <td style="width: 77px;" >{{data.percentageSLA}}</td>
              </tr>
          </ng-template>
      </p-table>
      </div>
    </p-panel>
    <p-panel header="Por Departamentos" [toggleable]="true" >
      <div class="">
        <p-table [value]="dataByDepto" [paginator]="true" [rows]="3">
          <ng-template pTemplate="header">
              <tr>
                  <th>Ticket Id</th>
                  <th>Creador</th>
                  <th style="width: 130px;">Asignado</th>
                  <th>Fecha Creacion</th>
                  <th>Fecha Completado</th>
                  <th>Departamento</th>
                  <th>Tiempo Real Resolucion</th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-dataByDepto>
              <tr>
                  <td>{{dataByDepto.ticketId}}</td>
                  <td style="width: 150px;">{{dataByDepto.email_creador}}</td>
                  <td style="width: 150px;" >{{dataByDepto.asignado}}</td>
                  <td>{{dataByDepto.creado_a}}</td>
                  <td>{{dataByDepto.compleado_a}}</td>
                  <td>{{dataByDepto.nombreDepartamento}}</td>
                  <td style="width: 150px">{{dataByDepto.tiempoRealResolucion}}</td>
              </tr>
          </ng-template>
        </p-table>
      </div>
    </p-panel>
  </section>
</main>
